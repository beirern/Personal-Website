---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_DESCRIPTION } from '../consts';

export interface Props {
	title: string;
	description?: string;
	image?: import('astro').ImageMetadata;
}

const { title, description = SITE_DESCRIPTION, image } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={title} description={description} image={image} />
		<style>
			/* Page Load Animation - Pure CSS approach */
			
			/* Hide content initially when page is loading */
			.page-loading header,
			.page-loading main > .section h1,
			.page-loading main > .section h2, 
			.page-loading main > .section h3,
			.page-loading main > .section .about-lead,
			.page-loading main > .section .about-description,
			.page-loading main > .section .about-interests,
			.page-loading main > .section .about-personal,
			.page-loading main > .section .social-links,
			.page-loading main > .section .about-image,
			.page-loading main > .section .work-item,
			.page-loading main > .section .project-card,
			.page-loading main > .section .blog-posts,
			.page-loading main > .section .project-grid,
			.page-loading main > .section .blog-grid,
			.page-loading footer {
				opacity: 0;
				transform: translateY(20px);
			}
			
			/* Animate content in when not loading */
			header,
			main > .section h1,
			main > .section h2, 
			main > .section h3,
			main > .section .about-lead,
			main > .section .about-description,
			main > .section .about-interests,
			main > .section .about-personal,
			main > .section .social-links,
			main > .section .about-image,
			main > .section .work-item,
			main > .section .project-card,
			main > .section .blog-posts,
			main > .section .project-grid,
			main > .section .blog-grid,
			footer {
				opacity: 1;
				transform: translateY(0);
				transition: opacity 0.6s ease, transform 0.6s ease;
			}
			
			/* Staggered animation delays */
			header { transition-delay: 0.1s; }
			main > .section:nth-child(1) h1,
			main > .section:nth-child(1) h2,
			main > .section:nth-child(1) h3,
			main > .section:nth-child(1) .about-lead { transition-delay: 0.2s; }
			main > .section:nth-child(1) .about-description { transition-delay: 0.3s; }
			main > .section:nth-child(1) .about-interests { transition-delay: 0.4s; }
			main > .section:nth-child(1) .about-personal { transition-delay: 0.5s; }
			main > .section:nth-child(1) .social-links { transition-delay: 0.6s; }
			main > .section:nth-child(1) .about-image { transition-delay: 0.7s; }
			
			main > .section:nth-child(2) .work-item:nth-child(1) { transition-delay: 0.8s; }
			main > .section:nth-child(2) .work-item:nth-child(2) { transition-delay: 0.9s; }
			main > .section:nth-child(2) .work-item:nth-child(3) { transition-delay: 1.0s; }
			
			main > .section:nth-child(3) .project-card,
			main > .section:nth-child(3) .project-grid { transition-delay: 1.1s; }
			
			main > .section:nth-child(4) .blog-posts,
			main > .section:nth-child(4) .blog-grid { transition-delay: 1.2s; }
			
			footer { transition-delay: 1.3s; }
			
			/* Reduce motion for accessibility */
			@media (prefers-reduced-motion: reduce) {
				header,
				main > .section h1,
				main > .section h2, 
				main > .section h3,
				main > .section .about-lead,
				main > .section .about-description,
				main > .section .about-interests,
				main > .section .about-personal,
				main > .section .social-links,
				main > .section .about-image,
				main > .section .work-item,
				main > .section .project-card,
				main > .section .blog-posts,
				main > .section .project-grid,
				main > .section .blog-grid,
				footer {
					transition: none;
					opacity: 1;
					transform: none;
				}
			}
		</style>
		<script>
			// Apply loading class immediately to hide content
			document.documentElement.className += ' page-loading';
		</script>
	</head>
	<body class="page-loading">
		<Header />
		<main>
			<slot />
		</main>
		<Footer />
		
		<script>
			// Simple page load animation trigger
			document.addEventListener('DOMContentLoaded', function() {
				// Remove loading class to trigger CSS-based animations
				document.body.classList.remove('page-loading');
				document.documentElement.classList.remove('page-loading');
			});
		</script>
	</body>
</html>