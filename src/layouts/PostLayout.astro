---
import BaseLayout from './BaseLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';

export interface Props {
	title: string;
	date: Date;
	tags: string[];
}

const { title, date, tags } = Astro.props;
---

<BaseLayout title={title}>
	<div class="container">
		<article class="post">
			<header class="post-header">
				<h1>{title}</h1>
				<div class="post-meta">
					<FormattedDate date={date} />
					{tags.map((tag) => (
						<span class="tag">
							<a href={`/tags/${tag}`}>#{tag}</a>
						</span>
					))}
				</div>
			</header>
			<div class="post-content">
				<slot />
			</div>
		</article>
	</div>
</BaseLayout>

<style>
	.container {
		max-width: 800px;
		margin: 0 auto;
		padding: 2em 1em;
	}
	
	.post {
		max-width: 100%;
	}
	
	.post-header {
		margin-bottom: 2rem;
		padding-bottom: 1rem;
		border-bottom: 1px solid var(--color-border-light);
	}
	
	h1 {
		margin: 0 0 0.5rem 0;
		font-size: 2.5rem;
		color: var(--color-text);
		line-height: 1.2;
	}
	
	.post-meta {
		color: var(--color-text-muted);
		font-size: 0.95rem;
		display: flex;
		align-items: center;
		gap: 1rem;
		flex-wrap: wrap;
	}
	
	.tag {
		display: inline-block;
	}
	
	.tag a {
		color: var(--color-accent);
		text-decoration: none;
		font-size: 0.9rem;
		transition: var(--transition-hover);
	}
	
	.tag a:hover {
		color: var(--color-accent-hover);
		text-decoration: underline;
	}
	
	.post-content {
		line-height: 1.7;
		color: var(--color-text-secondary);
	}
	
	.post-content :global(h2) {
		margin-top: 2rem;
		margin-bottom: 0.8rem;
		font-size: 1.8rem;
		color: var(--color-text);
	}
	
	.post-content :global(h3) {
		margin-top: 1.5rem;
		margin-bottom: 0.6rem;
		font-size: 1.4rem;
		color: var(--color-text);
	}
	
	.post-content :global(p) {
		margin-bottom: 1.2em;
	}
	
	.post-content :global(ul), .post-content :global(ol) {
		margin-bottom: 1.2rem;
		padding-left: 2rem;
	}
	
	.post-content :global(li) {
		margin-bottom: 0.4rem;
	}
	
	.post-content :global(img) {
		max-width: 100%;
		height: auto;
		margin: 1.5rem 0;
		border-radius: 8px;
	}
	
	.post-content :global(blockquote) {
		background: var(--color-bg-secondary);
		border-left: 4px solid var(--color-accent);
		margin: 1.5rem 0;
		padding: 1rem 1.5rem;
		font-style: italic;
		color: var(--color-text-secondary);
		border-radius: 4px;
	}
	
	.post-content :global(pre) {
		margin: 1.5rem 0;
		padding: 1rem;
		border-radius: 6px;
		background: var(--color-bg-secondary);
		border: 1px solid var(--color-border);
		overflow-x: auto;
		font-size: 0.9rem;
	}
	
	.post-content :global(code) {
		font-family: 'SFMono-Regular', 'Consolas', 'Liberation Mono', 'Menlo', monospace;
		font-size: 0.9rem;
		background: var(--color-bg-secondary);
		color: var(--color-text);
		padding: 0.2rem 0.4rem;
		border-radius: 3px;
		border: 1px solid var(--color-border);
	}
	
	.post-content :global(pre code) {
		background: none;
		border: none;
		padding: 0;
	}
</style>